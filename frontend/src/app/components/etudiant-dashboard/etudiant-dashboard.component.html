<div class="container-fluid mt-4">
  <!-- Header -->
  <div class="row mb-4">
    <div class="col-12">
      <h2>ğŸ‘¨â€ğŸ“ Espace Ã‰tudiant</h2>
      <p class="text-muted">Bienvenue, {{ currentUser?.username }}</p>
    </div>
  </div>

  <!-- Recherche -->
  <div class="row mb-4">
    <div class="col-md-6">
      <div class="input-group">
        <input
          type="text"
          class="form-control"
          placeholder="Rechercher un tutoriel..."
          [(ngModel)]="searchTitle"
          (input)="searchTutorials()"
        />
        <button class="btn btn-outline-secondary" type="button">
          ğŸ”
        </button>
      </div>
    </div>
    <div class="col-md-6">
      <div class="alert alert-info mb-0">
        ğŸ“š {{ filteredTutorials.length }} tutoriel(s) disponible(s)
      </div>
    </div>
  </div>

  <!-- Loading -->
  <div *ngIf="isLoading" class="text-center">
    <div class="spinner-border" role="status">
      <span class="visually-hidden">Chargement...</span>
    </div>
  </div>

  <div class="row" *ngIf="!isLoading">
    <!-- Liste des tutoriels -->
    <div class="col-md-6">
      <div class="card">
        <div class="card-header">
          <h5>ğŸ“š Tutoriels disponibles</h5>
        </div>
        <div class="card-body" style="max-height: 600px; overflow-y: auto;">
          <div *ngFor="let tutorial of filteredTutorials" 
               class="card mb-2 cursor-pointer tutorial-card"
               [class.border-primary]="selectedTutorial?.id === tutorial.id"
               [class.selected]="selectedTutorial?.id === tutorial.id"
               (click)="selectTutorial(tutorial)">
            <div class="card-body p-3">
              <h6 class="card-title mb-1">
                <span class="badge bg-success me-2">âœ…</span>
                {{ tutorial.title }}
              </h6>
              <p class="card-text text-muted small mb-0">
                {{ tutorial.description }}
              </p>
            </div>
          </div>
          
          <div *ngIf="filteredTutorials.length === 0" class="text-center text-muted py-4">
            <div *ngIf="searchTitle.trim(); else noTutorials">
              <p>ğŸ” Aucun tutoriel trouvÃ© pour "{{ searchTitle }}"</p>
              <button class="btn btn-secondary btn-sm" (click)="searchTitle = ''; searchTutorials()">
                Voir tous les tutoriels
              </button>
            </div>
            <ng-template #noTutorials>
              <p>ğŸ“š Aucun tutoriel publiÃ© disponible</p>
            </ng-template>
          </div>
        </div>
      </div>
    </div>

    <!-- DÃ©tail du tutoriel sÃ©lectionnÃ© -->
    <div class="col-md-6">
      <div class="card">
        <div class="card-header d-flex justify-content-between align-items-center">
          <h5>ğŸ“– DÃ©tail du tutoriel</h5>
          <button 
            *ngIf="selectedTutorial" 
            class="btn btn-sm btn-outline-secondary"
            (click)="clearSelection()"
          >
            âŒ Fermer
          </button>
        </div>
        <div class="card-body">
          <div *ngIf="selectedTutorial; else noSelection">
            <h4 class="mb-3">{{ selectedTutorial.title }}</h4>
            <hr>
            
            <div class="mb-3">
              <strong>ğŸ“ Description :</strong>
              <p class="mt-2">{{ selectedTutorial.description }}</p>
            </div>
            
            <div class="mb-3">
              <strong>ğŸ“Š Statut :</strong>
              <span class="badge bg-success ms-2">âœ… PubliÃ©</span>
            </div>
            
            <!-- Zone de contenu du tutoriel -->
            <div class="alert alert-light border">
              <h6>ğŸ“š Contenu du tutoriel</h6>
              <p class="mb-3">
                Le contenu dÃ©taillÃ© du tutoriel sera affichÃ© ici.
                Vous pouvez ajouter du texte, des images, des vidÃ©os, etc.
              </p>
              
              <!-- Simulation de contenu -->
              <div class="bg-white p-3 rounded border">
                <h6>Introduction</h6>
                <p>Ce tutoriel vous guidera Ã©tape par Ã©tape...</p>
                
                <h6>Ã‰tapes principales</h6>
                <ol>
                  <li>PremiÃ¨re Ã©tape importante</li>
                  <li>DeuxiÃ¨me Ã©tape cruciale</li>
                  <li>Finalisation du processus</li>
                </ol>
                
                <div class="alert alert-info">
                  <strong>ğŸ’¡ Conseil :</strong> N'hÃ©sitez pas Ã  prendre des notes pendant votre lecture !
                </div>
              </div>
            </div>

            <!-- Actions Ã©tudiant -->
            <div class="d-flex gap-2">
              <button class="btn btn-outline-primary btn-sm">
                â­ Marquer comme favori
              </button>
              <button class="btn btn-outline-success btn-sm">
                âœ… Marquer comme lu
              </button>
            </div>
          </div>
          
          <ng-template #noSelection>
            <div class="text-center text-muted py-5">
              <div class="mb-3">
                <i class="fas fa-book fa-3x text-muted"></i>
              </div>
              <h6>SÃ©lectionnez un tutoriel</h6>
              <p>Cliquez sur un tutoriel dans la liste pour voir les dÃ©tails</p>
            </div>
          </ng-template>
        </div>
      </div>
    </div>
  </div>
</div>

<style>
.cursor-pointer {
  cursor: pointer;
}

.tutorial-card:hover {
  background-color: #f8f9fa;
  transform: translateY(-1px);
  transition: all 0.2s ease;
}

.tutorial-card.selected {
  background-color: #e3f2fd;
  border-color: #2196f3 !important;
}
</style>